# Описание компонентов CLI приложения

## 1. Главный модуль: CLI
Класс `CLI` является точкой входа в приложение. Он реализует цикл **Read-Execute-Print Loop (REPL)**:
- Считывает ввод пользователя.
- Передает строку модулю `InputParser` для преобразования в последовательность команд.
- Исполняет команды через `Executor`.
- Обрабатывает исключения, предотвращая аварийное завершение (кроме команды `exit`).

---

## 2. Парсинг ввода: InputParser
Класс преобразует сырую строку ввода в структурированные команды:
- Создает объекты команд (наследники `Command`) с использованием токенов.

---

## 3. Вспомогательные парсеры
1. **Quote Parser**:
   - Токенизирует подкоманды с учетом пробелов и кавычек (`"`, `'`).
2. **Substitutor**:
   - Заменяет переменные окружения (например, `$PATH`) на их значения из `Context`.
3. **Pipe Parser**:
   - Разделяет команды по оператору `|` (пайп).

---

## 4. Исполнение команд: Executor
Управляет выполнением команд:
- Обновляет переменные окружения при необходимости.
- Обрабатывает поток ввода/вывода между командами.

---

## 5. Интерфейс команд: Command
**Структура команд**:
- **Поля**:
  - `args`: аргументы команды (например, `["file.txt"]` для `cat`).
  - `input`/`output`: потоки ввода/вывода.
- **Методы**:
  - `executor()`: выполняет логику команды.
  - `setInputStream()`/`setOutputStream()`: настраивает потоки.

Для внешних команд используется наследник `UnknownCommand`.

---

## 6. Context
Хранит переменные окружения в словаре `envVars`:
- **Методы**:
  - `getVar(x)`: возвращает значение переменной `x` (или пустую строку).
  - `setVar(x, val)`: присваивает значение `val` переменной `x` (создает при отсутствии).

---

## 7. Вспомогательные компоненты
- **Token**:
  - Хранит тип (строка, переменная) и значение.
  - Используется `InputParser` и `Substitutor` для промежуточной обработки.

---

## Взаимодействие компонентов (пример)
1. Пользователь вводит `echo $PATH`.
2. `CLI` передает строку в `InputParser`.
3. `InputParser`:
   - Разбивает строку на токены.
   - Заменяет `$PATH` на значение из `Context.envVars`.
4. Создается объект `EchoCommand` и передается в `Executor`.
5. `Executor` выполняет команду и возвращает результат в `CLI`.
6. Результат выводится на экран.
